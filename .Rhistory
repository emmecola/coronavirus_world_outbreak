# LOAD DATA
data("coronavirus")
# PLOT FUNCTION
plotCases <- function(dataframe,COUNTRY,COUNTRY_INFECTED)
{
filtered_covid <- coronavirus %>% filter(Country.Region==COUNTRY)
df <- data.frame(date=character(), cases=character(),
type=as.factor(character()),stringsAsFactors=TRUE)
start <- min(filtered_covid$date)
end <- max(filtered_covid$date)
theDate <- start
while (theDate <= end)
{
filtered_cum <- filtered_covid %>% filter(date<=theDate)
d <- sum((filtered_cum %>% filter(type=="death"))$cases) # sum deaths
r <- sum((filtered_cum %>% filter(type=="recovered"))$cases) # sum recovered
c <- sum((filtered_cum %>% filter(type=="confirmed"))$cases) # sum confirmed
i <- c - d - r # calculate currently infected
df_temp <- data.frame(date=theDate,cases=c(i,d,r),
type=c("currently infected","dead","recovered"),
stringsAsFactors=FALSE)
df <- rbind(df,df_temp)
theDate <- theDate + 1
}
COUNTRY_INFECTED[[COUNTRY]] = sum(df[df$date==end,'cases'])
colormap <- c("currently infected" = "darkorange1",
"recovered" = "deepskyblue3",
#"recovered" = "#50C878",
"dead" = "grey35")
p <-ggplot(data=df, mapping=aes(x=date, y=cases, fill=factor(type, levels = c("recovered","currently infected","dead")))) +
geom_bar(stat="identity") +
scale_fill_manual("", values = colormap) +
ggtitle(paste("SARS-COV-2 in ",COUNTRY," (last update: ",format(end,"%d/%m/%y"),")",sep="")) +
scale_x_date(date_labels="%d/%m") +
scale_y_continuous(position="right") + labs(x="",y="") +
theme(legend.position="bottom", legend.background = element_rect(color = NA), panel.grid.minor = element_blank(), legend.text=element_text(size=14), plot.title = element_text(size=14))
ggsave(paste("img/plot_",str_replace(COUNTRY," ","_"),".png",sep=""), device='png', limitsize=TRUE, bg='transparent')
return(COUNTRY_INFECTED)
}
# WRITE README HEADER
s1='<div align="center"><h1>Coronavirus outbreak across the world</h1></div>'
s2='<div align="center">Collection of histogram plots tracking the coronavirus outbreak worldwide</div>'
s3='<hr>'
write(c(s1,s2,s3),file="README.md", append=FALSE)
# PLOT ALL COUNTRIES
COUNTRY_INFECTED <- list()
for (C in unique(coronavirus$Country.Region))
{COUNTRY_INFECTED <- plotCases(coronavirus,C,COUNTRY_INFECTED)}
COUNTRY_INFECTED
for (COUNTRY in COUNTRY_INFECTED[order(unlist(COUNTRY_INFECTED),decreasing=TRUE)])
{print(COUNTRY)}
for (COUNTRY in COUNTRY_INFECTED[order(unlist(COUNTRY_INFECTED),decreasing=TRUE)])
{print(names(COUNTRY))}
COUNTRY_INFECTED[order(unlist(COUNTRY_INFECTED),decreasing=TRUE)]
names(COUNTRY_INFECTED[order(unlist(COUNTRY_INFECTED),decreasing=TRUE)])
for (COUNTRY in names(COUNTRY_INFECTED[order(unlist(COUNTRY_INFECTED),decreasing=TRUE)]))
{
x=paste('<div align="center"><img src="img/plot_',str_replace(COUNTRY," ","_"),'.png?raw=true" width="80%"/></div>',sep="")
write(x,file="README.md", append=TRUE)
}
# INSTALL UPDATED PACKAGE
devtools::install_github("RamiKrispin/coronavirus")
# SET WORKING DIRECTORY
setwd("~/GIT_folder/coronavirus_world_outbreak")
# LOAD LIBRARIES
library(coronavirus)
library(dplyr)
library(ggplot2)
library(stringr)
# LOAD DATA
data("coronavirus")
# PLOT FUNCTION
plotCases <- function(dataframe,COUNTRY,COUNTRY_INFECTED)
{
filtered_covid <- coronavirus %>% filter(Country.Region==COUNTRY)
df <- data.frame(date=character(), cases=character(),
type=as.factor(character()),stringsAsFactors=TRUE)
start <- min(filtered_covid$date)
end <- max(filtered_covid$date)
theDate <- start
while (theDate <= end)
{
filtered_cum <- filtered_covid %>% filter(date<=theDate)
d <- sum((filtered_cum %>% filter(type=="death"))$cases) # sum deaths
r <- sum((filtered_cum %>% filter(type=="recovered"))$cases) # sum recovered
c <- sum((filtered_cum %>% filter(type=="confirmed"))$cases) # sum confirmed
i <- c - d - r # calculate currently infected
df_temp <- data.frame(date=theDate,cases=c(i,d,r),
type=c("currently infected","dead","recovered"),
stringsAsFactors=FALSE)
df <- rbind(df,df_temp)
theDate <- theDate + 1
}
COUNTRY_INFECTED[[COUNTRY]] = sum(df[df$date==end,'cases'])
colormap <- c("currently infected" = "darkorange1",
"recovered" = "deepskyblue3",
#"recovered" = "#50C878",
"dead" = "grey35")
p <-ggplot(data=df, mapping=aes(x=date, y=cases, fill=factor(type, levels = c("recovered","currently infected","dead")))) +
geom_bar(stat="identity") +
scale_fill_manual("", values = colormap) +
ggtitle(paste("SARS-COV-2 in ",COUNTRY," (last update: ",format(end,"%d/%m/%y"),")",sep="")) +
scale_x_date(date_labels="%d/%m") +
scale_y_continuous(position="right") + labs(x="",y="") +
theme(legend.position="bottom", legend.background = element_rect(color = NA), panel.grid.minor = element_blank(), legend.text=element_text(size=14), plot.title = element_text(size=14))
ggsave(paste("img/plot_",str_replace(COUNTRY," ","_"),".png",sep=""), device='png', limitsize=TRUE, bg='transparent')
return(COUNTRY_INFECTED)
}
# WRITE README HEADER
s1='<div align="center"><h1>Coronavirus outbreak across the world</h1></div>'
s2='<div align="center">Collection of histogram plots tracking the coronavirus outbreak worldwide</div>'
s3='<hr>'
write(c(s1,s2,s3),file="README.md", append=FALSE)
# PLOT ALL COUNTRIES
COUNTRY_INFECTED <- list()
for (C in unique(coronavirus$Country.Region))
{COUNTRY_INFECTED <- plotCases(coronavirus,C,COUNTRY_INFECTED)}
# FILL README
for (COUNTRY in names(COUNTRY_INFECTED[order(unlist(COUNTRY_INFECTED),decreasing=TRUE)]))
{
x=paste('<div align="center"><img src="img/plot_',str_replace(COUNTRY," ","_"),'.png?raw=true" width="80%"/></div>',sep="")
write(x,file="README.md", append=TRUE)
}
tail(coronavirus)
max(coronavirus$date)
# INSTALL UPDATED PACKAGE
devtools::install_github("RamiKrispin/coronavirus")
# SET WORKING DIRECTORY
setwd("~/GIT_folder/coronavirus_world_outbreak")
# LOAD LIBRARIES
library(coronavirus)
library(dplyr)
library(ggplot2)
library(stringr)
# LOAD DATA
data("coronavirus")
# PLOT FUNCTION
plotCases <- function(dataframe,COUNTRY,COUNTRY_INFECTED)
{
filtered_covid <- coronavirus %>% filter(Country.Region==COUNTRY)
df <- data.frame(date=character(), cases=character(),
type=as.factor(character()),stringsAsFactors=TRUE)
start <- min(filtered_covid$date)
end <- max(filtered_covid$date)
theDate <- start
while (theDate <= end)
{
filtered_cum <- filtered_covid %>% filter(date<=theDate)
d <- sum((filtered_cum %>% filter(type=="death"))$cases) # sum deaths
r <- sum((filtered_cum %>% filter(type=="recovered"))$cases) # sum recovered
c <- sum((filtered_cum %>% filter(type=="confirmed"))$cases) # sum confirmed
i <- c - d - r # calculate currently infected
df_temp <- data.frame(date=theDate,cases=c(i,d,r),
type=c("currently infected","dead","recovered"),
stringsAsFactors=FALSE)
df <- rbind(df,df_temp)
theDate <- theDate + 1
}
COUNTRY_INFECTED[[COUNTRY]] = sum(df[df$date==end,'cases'])
colormap <- c("currently infected" = "darkorange1",
"recovered" = "deepskyblue3",
#"recovered" = "#50C878",
"dead" = "grey35")
p <-ggplot(data=df, mapping=aes(x=date, y=cases, fill=factor(type, levels = c("recovered","currently infected","dead")))) +
geom_bar(stat="identity") +
scale_fill_manual("", values = colormap) +
ggtitle(paste("SARS-COV-2 in ",COUNTRY," (last update: ",format(end,"%d/%m/%y"),")",sep="")) +
scale_x_date(date_labels="%d/%m") +
scale_y_continuous(position="right") + labs(x="",y="") +
theme(legend.position="bottom", legend.background = element_rect(color = NA), panel.grid.minor = element_blank(), legend.text=element_text(size=14), plot.title = element_text(size=14))
ggsave(paste("img/plot_",str_replace(COUNTRY," ","_"),".png",sep=""), device='png', limitsize=TRUE, bg='transparent')
return(COUNTRY_INFECTED)
}
# WRITE README HEADER
s1='<div align="center"><h1>Coronavirus outbreak across the world</h1></div>'
s2='<div align="center">Collection of histogram plots tracking the coronavirus outbreak worldwide</div>'
s3='<hr>'
write(c(s1,s2,s3),file="README.md", append=FALSE)
# PLOT ALL COUNTRIES
COUNTRY_INFECTED <- list()
for (C in unique(coronavirus$Country.Region))
{COUNTRY_INFECTED <- plotCases(coronavirus,C,COUNTRY_INFECTED)}
# FILL README
for (COUNTRY in names(COUNTRY_INFECTED[order(unlist(COUNTRY_INFECTED),decreasing=TRUE)]))
{
x=paste('<div align="center"><img src="img/plot_',str_replace(COUNTRY," ","_"),'.png?raw=true" width="80%"/></div>',sep="")
write(x,file="README.md", append=TRUE)
}
# INSTALL UPDATED PACKAGE
devtools::install_github("RamiKrispin/coronavirus")
# SET WORKING DIRECTORY
setwd("~/GIT_folder/coronavirus_world_outbreak")
# LOAD LIBRARIES
library(coronavirus)
library(dplyr)
library(ggplot2)
library(stringr)
# LOAD DATA
data("coronavirus")
# PLOT FUNCTION
plotCases <- function(dataframe,COUNTRY,COUNTRY_INFECTED)
{
filtered_covid <- coronavirus %>% filter(Country.Region==COUNTRY)
df <- data.frame(date=character(), cases=character(),
type=as.factor(character()),stringsAsFactors=TRUE)
start <- min(filtered_covid$date)
end <- max(filtered_covid$date)
theDate <- start
while (theDate <= end)
{
filtered_cum <- filtered_covid %>% filter(date<=theDate)
d <- sum((filtered_cum %>% filter(type=="death"))$cases) # sum deaths
r <- sum((filtered_cum %>% filter(type=="recovered"))$cases) # sum recovered
c <- sum((filtered_cum %>% filter(type=="confirmed"))$cases) # sum confirmed
i <- c - d - r # calculate currently infected
df_temp <- data.frame(date=theDate,cases=c(i,d,r),
type=c("currently infected","dead","recovered"),
stringsAsFactors=FALSE)
df <- rbind(df,df_temp)
theDate <- theDate + 1
}
COUNTRY_INFECTED[[COUNTRY]] = sum(df[df$date==end,'cases'])
colormap <- c("currently infected" = "darkorange1",
"recovered" = "deepskyblue3",
#"recovered" = "#50C878",
"dead" = "grey35")
p <-ggplot(data=df, mapping=aes(x=date, y=cases, fill=factor(type, levels = c("recovered","currently infected","dead")))) +
geom_bar(stat="identity") +
scale_fill_manual("", values = colormap) +
ggtitle(paste("SARS-COV-2 in ",COUNTRY," (last update: ",format(end,"%d/%m/%y"),")",sep="")) +
scale_x_date(date_labels="%d/%m") +
scale_y_continuous(position="right") + labs(x="",y="") +
theme(legend.position="bottom", legend.background = element_rect(color = NA), panel.grid.minor = element_blank(), legend.text=element_text(size=14), plot.title = element_text(size=14))
ggsave(paste("img/plot_",str_replace(COUNTRY," ","_"),".png",sep=""), device='png', limitsize=TRUE, bg='transparent')
return(COUNTRY_INFECTED)
}
# WRITE README HEADER
s1='<div align="center"><h1>Coronavirus outbreak across the world</h1></div>'
s2='<div align="center">Collection of histogram plots tracking the coronavirus outbreak worldwide</div>'
s3='<hr>'
write(c(s1,s2,s3),file="README.md", append=FALSE)
# PLOT ALL COUNTRIES
COUNTRY_INFECTED <- list()
for (C in unique(coronavirus$Country.Region))
{COUNTRY_INFECTED <- plotCases(coronavirus,C,COUNTRY_INFECTED)}
# FILL README
for (COUNTRY in names(COUNTRY_INFECTED[order(unlist(COUNTRY_INFECTED),decreasing=TRUE)]))
{
x=paste('<div align="center"><img src="img/plot_',str_replace(COUNTRY," ","_"),'.png?raw=true" width="80%"/></div>',sep="")
write(x,file="README.md", append=TRUE)
}
?ggsave
# INSTALL UPDATED PACKAGE
devtools::install_github("RamiKrispin/coronavirus")
# SET WORKING DIRECTORY
setwd("~/GIT_folder/coronavirus_world_outbreak")
# LOAD LIBRARIES
library(coronavirus)
library(dplyr)
library(ggplot2)
library(stringr)
# LOAD DATA
data("coronavirus")
# PLOT FUNCTION
plotCases <- function(dataframe,COUNTRY,COUNTRY_INFECTED)
{
filtered_covid <- coronavirus %>% filter(Country.Region==COUNTRY)
df <- data.frame(date=character(), cases=character(),
type=as.factor(character()),stringsAsFactors=TRUE)
start <- min(filtered_covid$date)
end <- max(filtered_covid$date)
theDate <- start
while (theDate <= end)
{
filtered_cum <- filtered_covid %>% filter(date<=theDate)
d <- sum((filtered_cum %>% filter(type=="death"))$cases) # sum deaths
r <- sum((filtered_cum %>% filter(type=="recovered"))$cases) # sum recovered
c <- sum((filtered_cum %>% filter(type=="confirmed"))$cases) # sum confirmed
i <- c - d - r # calculate currently infected
df_temp <- data.frame(date=theDate,cases=c(i,d,r),
type=c("currently infected","dead","recovered"),
stringsAsFactors=FALSE)
df <- rbind(df,df_temp)
theDate <- theDate + 1
}
COUNTRY_INFECTED[[COUNTRY]] = sum(df[df$date==end,'cases'])
colormap <- c("currently infected" = "darkorange1",
"recovered" = "deepskyblue3",
#"recovered" = "#50C878",
"dead" = "grey35")
p <-ggplot(data=df, mapping=aes(x=date, y=cases, fill=factor(type, levels = c("recovered","currently infected","dead")))) +
geom_bar(stat="identity") +
scale_fill_manual("", values = colormap) +
ggtitle(paste("SARS-COV-2 in ",COUNTRY," (last update: ",format(end,"%d/%m/%y"),")",sep="")) +
scale_x_date(date_labels="%d/%m") +
scale_y_continuous(position="right") + labs(x="",y="") +
theme(legend.position="bottom", legend.background = element_rect(color = NA), panel.grid.minor = element_blank(), legend.text=element_text(size=14), plot.title = element_text(size=14))
ggsave(paste("img/plot_",str_replace(COUNTRY," ","_"),".png",sep=""), device='png', limitsize=FALSE, bg='transparent')
return(COUNTRY_INFECTED)
}
# WRITE README HEADER
s1='<div align="center"><h1>Coronavirus outbreak across the world</h1></div>'
s2='<div align="center">Collection of histogram plots tracking the coronavirus outbreak worldwide</div>'
s3='<hr>'
write(c(s1,s2,s3),file="README.md", append=FALSE)
# PLOT ALL COUNTRIES
COUNTRY_INFECTED <- list()
for (C in unique(coronavirus$Country.Region))
{COUNTRY_INFECTED <- plotCases(coronavirus,C,COUNTRY_INFECTED)}
# FILL README
for (COUNTRY in names(COUNTRY_INFECTED[order(unlist(COUNTRY_INFECTED),decreasing=TRUE)]))
{
x=paste('<div align="center"><img src="img/plot_',str_replace(COUNTRY," ","_"),'.png?raw=true" width="80%"/></div>',sep="")
write(x,file="README.md", append=TRUE)
}
# INSTALL UPDATED PACKAGE
devtools::install_github("RamiKrispin/coronavirus")
# SET WORKING DIRECTORY
setwd("~/GIT_folder/coronavirus_world_outbreak")
# LOAD LIBRARIES
library(coronavirus)
library(dplyr)
library(ggplot2)
library(stringr)
# LOAD DATA
data("coronavirus")
# PLOT FUNCTION
plotCases <- function(dataframe,COUNTRY,COUNTRY_INFECTED)
{
filtered_covid <- coronavirus %>% filter(Country.Region==COUNTRY)
df <- data.frame(date=character(), cases=character(),
type=as.factor(character()),stringsAsFactors=TRUE)
start <- min(filtered_covid$date)
end <- max(filtered_covid$date)
theDate <- start
while (theDate <= end)
{
filtered_cum <- filtered_covid %>% filter(date<=theDate)
d <- sum((filtered_cum %>% filter(type=="death"))$cases) # sum deaths
r <- sum((filtered_cum %>% filter(type=="recovered"))$cases) # sum recovered
c <- sum((filtered_cum %>% filter(type=="confirmed"))$cases) # sum confirmed
i <- c - d - r # calculate currently infected
df_temp <- data.frame(date=theDate,cases=c(i,d,r),
type=c("currently infected","dead","recovered"),
stringsAsFactors=FALSE)
df <- rbind(df,df_temp)
theDate <- theDate + 1
}
COUNTRY_INFECTED[[COUNTRY]] = sum(df[df$date==end,'cases'])
colormap <- c("currently infected" = "darkorange1",
"recovered" = "deepskyblue3",
#"recovered" = "#50C878",
"dead" = "grey35")
p <-ggplot(data=df, mapping=aes(x=date, y=cases, fill=factor(type, levels = c("recovered","currently infected","dead")))) +
geom_bar(stat="identity") +
scale_fill_manual("", values = colormap) +
ggtitle(paste("SARS-COV-2 in ",COUNTRY," (last update: ",format(end,"%d/%m/%y"),")",sep="")) +
scale_x_date(date_labels="%d/%m") +
scale_y_continuous(position="right") + labs(x="",y="") +
theme(legend.position="bottom", legend.background = element_rect(color = NA), panel.grid.minor = element_blank(), legend.text=element_text(size=14), plot.title = element_text(size=14))
ggsave(paste("img/plot_",str_replace(COUNTRY," ","_"),".png",sep=""), device='png', width = 10, units='in', bg='transparent')
return(COUNTRY_INFECTED)
}
# WRITE README HEADER
s1='<div align="center"><h1>Coronavirus outbreak across the world</h1></div>'
s2='<div align="center">Collection of histogram plots tracking the coronavirus outbreak worldwide</div>'
s3='<hr>'
write(c(s1,s2,s3),file="README.md", append=FALSE)
# PLOT ALL COUNTRIES
COUNTRY_INFECTED <- list()
for (C in unique(coronavirus$Country.Region))
{COUNTRY_INFECTED <- plotCases(coronavirus,C,COUNTRY_INFECTED)}
# FILL README
for (COUNTRY in names(COUNTRY_INFECTED[order(unlist(COUNTRY_INFECTED),decreasing=TRUE)]))
{
x=paste('<div align="center"><img src="img/plot_',str_replace(COUNTRY," ","_"),'.png?raw=true" width="80%"/></div>',sep="")
write(x,file="README.md", append=TRUE)
}
load("C:/Users/asus/Downloads/coronavirus.rda")
View(coronavirus)
View(coronavirus)
# INSTALL UPDATED PACKAGE
devtools::install_github("RamiKrispin/coronavirus")
# SET WORKING DIRECTORY
setwd("~/GIT_folder/coronavirus_world_outbreak")
# LOAD LIBRARIES
library(coronavirus)
library(dplyr)
library(ggplot2)
library(stringr)
# LOAD DATA
data("coronavirus")
# PLOT FUNCTION
plotCases <- function(dataframe,COUNTRY,COUNTRY_INFECTED)
{
filtered_covid <- coronavirus %>% filter(Country.Region==COUNTRY)
df <- data.frame(date=character(), cases=character(),
type=as.factor(character()),stringsAsFactors=TRUE)
start <- min(filtered_covid$date)
end <- max(filtered_covid$date)
theDate <- start
while (theDate <= end)
{
filtered_cum <- filtered_covid %>% filter(date<=theDate)
d <- sum((filtered_cum %>% filter(type=="death"))$cases) # sum deaths
r <- sum((filtered_cum %>% filter(type=="recovered"))$cases) # sum recovered
c <- sum((filtered_cum %>% filter(type=="confirmed"))$cases) # sum confirmed
i <- c - d - r # calculate currently infected
df_temp <- data.frame(date=theDate,cases=c(i,d,r),
type=c("currently infected","dead","recovered"),
stringsAsFactors=FALSE)
df <- rbind(df,df_temp)
theDate <- theDate + 1
}
COUNTRY_INFECTED[[COUNTRY]] = sum(df[df$date==end,'cases'])
colormap <- c("currently infected" = "darkorange1",
"recovered" = "deepskyblue3",
#"recovered" = "#50C878",
"dead" = "grey35")
p <-ggplot(data=df, mapping=aes(x=date, y=cases, fill=factor(type, levels = c("recovered","currently infected","dead")))) +
geom_bar(stat="identity") +
scale_fill_manual("", values = colormap) +
ggtitle(paste("SARS-COV-2 in ",COUNTRY," (last update: ",format(end,"%d/%m/%y"),")",sep="")) +
scale_x_date(date_labels="%d/%m") +
scale_y_continuous(position="right") + labs(x="",y="") +
theme(legend.position="bottom", legend.background = element_rect(color = NA), panel.grid.minor = element_blank(), legend.text=element_text(size=14), plot.title = element_text(size=14))
ggsave(paste("img/plot_",str_replace(COUNTRY," ","_"),".png",sep=""), device='png', width = 10, units='in', bg='transparent')
return(COUNTRY_INFECTED)
}
# WRITE README HEADER
s1='<div align="center"><h1>Coronavirus outbreak across the world</h1></div>'
s2='<div align="center">Collection of histogram plots tracking the coronavirus outbreak worldwide</div>'
s3='<hr>'
write(c(s1,s2,s3),file="README.md", append=FALSE)
# PLOT ALL COUNTRIES
COUNTRY_INFECTED <- list()
for (C in unique(coronavirus$Country.Region))
{COUNTRY_INFECTED <- plotCases(coronavirus,C,COUNTRY_INFECTED)}
# FILL README
for (COUNTRY in names(COUNTRY_INFECTED[order(unlist(COUNTRY_INFECTED),decreasing=TRUE)]))
{
x=paste('<div align="center"><img src="img/plot_',str_replace(COUNTRY," ","_"),'.png?raw=true" width="80%"/></div>',sep="")
write(x,file="README.md", append=TRUE)
}
# INSTALL UPDATED PACKAGE
devtools::install_github("RamiKrispin/coronavirus",force=TRUE)
# SET WORKING DIRECTORY
setwd("~/GIT_folder/coronavirus_world_outbreak")
# LOAD LIBRARIES
library(coronavirus)
library(dplyr)
library(ggplot2)
library(stringr)
# LOAD DATA
data("coronavirus")
# PLOT FUNCTION
plotCases <- function(dataframe,COUNTRY,COUNTRY_INFECTED)
{
filtered_covid <- coronavirus %>% filter(Country.Region==COUNTRY)
df <- data.frame(date=character(), cases=character(),
type=as.factor(character()),stringsAsFactors=TRUE)
start <- min(filtered_covid$date)
end <- max(filtered_covid$date)
theDate <- start
while (theDate <= end)
{
filtered_cum <- filtered_covid %>% filter(date<=theDate)
d <- sum((filtered_cum %>% filter(type=="death"))$cases) # sum deaths
r <- sum((filtered_cum %>% filter(type=="recovered"))$cases) # sum recovered
c <- sum((filtered_cum %>% filter(type=="confirmed"))$cases) # sum confirmed
i <- c - d - r # calculate currently infected
df_temp <- data.frame(date=theDate,cases=c(i,d,r),
type=c("currently infected","dead","recovered"),
stringsAsFactors=FALSE)
df <- rbind(df,df_temp)
theDate <- theDate + 1
}
COUNTRY_INFECTED[[COUNTRY]] = sum(df[df$date==end,'cases'])
colormap <- c("currently infected" = "darkorange1",
"recovered" = "deepskyblue3",
#"recovered" = "#50C878",
"dead" = "grey35")
p <-ggplot(data=df, mapping=aes(x=date, y=cases, fill=factor(type, levels = c("recovered","currently infected","dead")))) +
geom_bar(stat="identity") +
scale_fill_manual("", values = colormap) +
ggtitle(paste("SARS-COV-2 in ",COUNTRY," (last update: ",format(end,"%d/%m/%y"),")",sep="")) +
scale_x_date(date_labels="%d/%m") +
scale_y_continuous(position="right") + labs(x="",y="") +
theme(legend.position="bottom", legend.background = element_rect(color = NA), panel.grid.minor = element_blank(), legend.text=element_text(size=14), plot.title = element_text(size=14))
ggsave(paste("img/plot_",str_replace(COUNTRY," ","_"),".png",sep=""), device='png', width = 10, units='in', bg='transparent')
return(COUNTRY_INFECTED)
}
# WRITE README HEADER
s1='<div align="center"><h1>Coronavirus outbreak across the world</h1></div>'
s2='<div align="center">Collection of histogram plots tracking the coronavirus outbreak worldwide</div>'
s3='<hr>'
write(c(s1,s2,s3),file="README.md", append=FALSE)
# PLOT ALL COUNTRIES
COUNTRY_INFECTED <- list()
for (C in unique(coronavirus$Country.Region))
{COUNTRY_INFECTED <- plotCases(coronavirus,C,COUNTRY_INFECTED)}
# FILL README
for (COUNTRY in names(COUNTRY_INFECTED[order(unlist(COUNTRY_INFECTED),decreasing=TRUE)]))
{
x=paste('<div align="center"><img src="img/plot_',str_replace(COUNTRY," ","_"),'.png?raw=true" width="80%"/></div>',sep="")
write(x,file="README.md", append=TRUE)
}
devtools::install_github("RamiKrispin/coronavirus",force=TRUE)
library(coronavirus)
data("coronavirus")
View(coronavirus)
View(coronavirus)
